[0;32m[INFO][0m Using Godot: godot
[0;32m[INFO][0m Project dir: /home/martin/repos/qdnd
[0;32m[INFO][0m Running in FULL-FIDELITY mode (HUD, animations, visuals active)
[0;32m[INFO][0m Running auto-battle...
[0;36mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32m[INFO][0m Using existing display: :0
Godot Engine v4.6.stable.mono.official.89cea1439 - https://godotengine.org
Vulkan 1.4.305 - Forward+ - Using Device #0: Unknown - llvmpipe (LLVM 19.1.1, 256 bits)
libasound.so.2: cannot open shared object file: No such file or directory
libpulse.so.0: cannot open shared object file: No such file or directory
libpulse.so.0: cannot open shared object file: No such file or directory
libasound.so.2: cannot open shared object file: No such file or directory
WARNING: All audio drivers failed, falling back to the dummy driver.
     at: initialize (servers/audio/audio_server.cpp:247)

WARNING: res://Combat/Arena/CombatantVisual.tscn:4 - ext_resource, invalid UID: uid://g6he6nsrv1v0 - using text path instead: res://Animations.res
     at: load (scene/resources/resource_format_text.cpp:500)
WARNING: res://Combat/Arena/CombatantVisual.tscn:5 - ext_resource, invalid UID: uid://dn626n3stbwgc - using text path instead: res://Animation2.res
     at: load (scene/resources/resource_format_text.cpp:500)
WARNING: 'res://Animation2.res': In external resource #0, invalid UID: 'uid://bsjqmu4c2torv' - using text path instead: 'res://exported animations/A_TPose.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #1, invalid UID: 'uid://ce1x03ookic2a' - using text path instead: 'res://exported animations/Chest_Open.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #2, invalid UID: 'uid://dtvh3qd2sms4m' - using text path instead: 'res://exported animations/ClimbUp_1m_RM.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #3, invalid UID: 'uid://balts1qvahfp' - using text path instead: 'res://exported animations/Consume.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #4, invalid UID: 'uid://51qhqi3hygjy' - using text path instead: 'res://exported animations/Farm_Harvest.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #5, invalid UID: 'uid://b5lva34a5vaym' - using text path instead: 'res://exported animations/Farm_PlantSeed.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #6, invalid UID: 'uid://hj1ohetug0sf' - using text path instead: 'res://exported animations/Farm_Watering.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #7, invalid UID: 'uid://cvsj6671juasw' - using text path instead: 'res://exported animations/Hit_Knockback.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #8, invalid UID: 'uid://b0rkt0ao7jtcx' - using text path instead: 'res://exported animations/Hit_Knockback_RM.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #9, invalid UID: 'uid://cqbseca73un8i' - using text path instead: 'res://exported animations/Idle_FoldArms.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #10, invalid UID: 'uid://blfe2i5lp1e2b' - using text path instead: 'res://exported animations/Idle_Lantern.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #11, invalid UID: 'uid://g0rcbkyyjuer' - using text path instead: 'res://exported animations/Idle_No.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #12, invalid UID: 'uid://d0yvwwincxmx' - using text path instead: 'res://exported animations/Idle_Rail.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #13, invalid UID: 'uid://c12ba7xsy5ogi' - using text path instead: 'res://exported animations/Idle_Rail_Call.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #14, invalid UID: 'uid://duf22rj1vioqh' - using text path instead: 'res://exported animations/Idle_Shield.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #15, invalid UID: 'uid://dv22h2s6j6dhb' - using text path instead: 'res://exported animations/Idle_Shield_Break.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #16, invalid UID: 'uid://yfkjc81tga4m' - using text path instead: 'res://exported animations/Idle_TalkingPhone.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #17, invalid UID: 'uid://clbf4fstx4ef1' - using text path instead: 'res://exported animations/LayToIdle.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #18, invalid UID: 'uid://bgrfx5to7dmxm' - using text path instead: 'res://exported animations/Melee_Hook.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #19, invalid UID: 'uid://cyyct7hcrf013' - using text path instead: 'res://exported animations/Melee_Hook_Rec.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #20, invalid UID: 'uid://dc5rtadrua78y' - using text path instead: 'res://exported animations/NinjaJump_Idle.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #21, invalid UID: 'uid://dqpjj0ay816o2' - using text path instead: 'res://exported animations/NinjaJump_Land.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #22, invalid UID: 'uid://bi5ptl3vqtwmu' - using text path instead: 'res://exported animations/NinjaJump_Start.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #23, invalid UID: 'uid://ubntew1vajqj' - using text path instead: 'res://exported animations/OverhandThrow.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #24, invalid UID: 'uid://dvqfo6a82em7d' - using text path instead: 'res://exported animations/Shield_Dash_RM.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #25, invalid UID: 'uid://bwrvyvwlqxphq' - using text path instead: 'res://exported animations/Shield_OneShot.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #26, invalid UID: 'uid://dvq8ubs6hu6p5' - using text path instead: 'res://exported animations/Slide.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #27, invalid UID: 'uid://cqw21iejm6dss' - using text path instead: 'res://exported animations/Slide_Exit.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #28, invalid UID: 'uid://d2dmvu7d0u8fn' - using text path instead: 'res://exported animations/Slide_Start.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #29, invalid UID: 'uid://t0s1l0ysy71y' - using text path instead: 'res://exported animations/Sword_Block.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #30, invalid UID: 'uid://brsxtdkkracbt' - using text path instead: 'res://exported animations/Sword_Dash_RM.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #31, invalid UID: 'uid://cnhwjcayvwbcc' - using text path instead: 'res://exported animations/Sword_Regular_A.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #32, invalid UID: 'uid://sf877om06knn' - using text path instead: 'res://exported animations/Sword_Regular_A_Rec.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #33, invalid UID: 'uid://rfeltkhh66dr' - using text path instead: 'res://exported animations/Sword_Regular_B.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #34, invalid UID: 'uid://b8x8yn0dkmy8m' - using text path instead: 'res://exported animations/Sword_Regular_B_Rec.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #35, invalid UID: 'uid://ciqb801xnonug' - using text path instead: 'res://exported animations/Sword_Regular_C.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #36, invalid UID: 'uid://p1jem4pougsr' - using text path instead: 'res://exported animations/Sword_Regular_Combo.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #37, invalid UID: 'uid://8u1dx4o5g6vo' - using text path instead: 'res://exported animations/TreeChopping.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #38, invalid UID: 'uid://dy7taxht1vv21' - using text path instead: 'res://exported animations/Walk_Carry.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #39, invalid UID: 'uid://n3fadkrnyef' - using text path instead: 'res://exported animations/Yes.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #40, invalid UID: 'uid://bmmpsgwqf02w5' - using text path instead: 'res://exported animations/Zombie_Idle.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #41, invalid UID: 'uid://clcpnrsifpwbj' - using text path instead: 'res://exported animations/Zombie_Scratch.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: 'res://Animation2.res': In external resource #42, invalid UID: 'uid://c1hfh30tvrxvn' - using text path instead: 'res://exported animations/Zombie_Walk_Fwd.res'.
     at: open (core/io/resource_format_binary.cpp:1089)
WARNING: res://Combat/Arena/CombatArena.tscn:10 - ext_resource, invalid UID: uid://c5itv515sbcun - using text path instead: res://assets/Scenes/Things/Wall.tscn
     at: load (scene/resources/resource_format_text.cpp:500)
WARNING: res://Combat/Arena/CombatArena.tscn:11 - ext_resource, invalid UID: uid://d2ulskm4g0x8c - using text path instead: res://assets/Scenes/Things/Crate.tscn
     at: load (scene/resources/resource_format_text.cpp:500)
WARNING: res://Combat/Arena/CombatArena.tscn:12 - ext_resource, invalid UID: uid://26lqv4cf02yu - using text path instead: res://assets/Scenes/Things/WallDoorway.tscn
     at: load (scene/resources/resource_format_text.cpp:500)
[ScenarioSelector] Found 0 scenarios
[CombatArena] === COMBAT ARENA INITIALIZING ===
[DebugFlag] IsAutoBattle = True
[DebugFlag] IsFullFidelity = True
[DebugFlag] SkipAnimations = False
[CombatArena] Full-fidelity mode: HUD, animations, and visuals will run normally
[CombatArena] Auto-battle CLI mode detected
[CombatArena] Dynamic scenario mode: AbilityTest
[CombatArena] Dynamic scenario seed: 1
[CombatArena] Dynamic scenario level: 3
[CombatArena] Dynamic ability under test: patient_defence
[CombatArena] Auto-battle AI seed override: 42
[CombatArena] Auto-battle max runtime: 10.0s
[CombatArena] Verbose arena logs disabled for auto-battle (use --verbose-arena-logs to enable)
[CombatContext] Registered service: CombatStateMachine
[CombatContext] Registered service: TurnQueueService
[CombatContext] Registered service: CommandService
[CombatContext] Registered service: CombatLog
[CombatContext] Registered service: ScenarioLoader
[Registry] Loaded from /home/martin/repos/qdnd/Data:
  - 206 abilities
  - 113 statuses
  - 0 scenarios
  - 8 beast forms
[WARN] [Ability] astral_knowledge: No effects defined
[WARN] [Ability] mage_hand: No effects defined
[WARN] [Ability] enhance_leap: No effects defined
[WARN] [Ability] wizard_cantrip_choice: No effects defined
[WARN] [Ability] arcane_recovery: No effects defined
[WARN] [Ability] war_gods_blessing: No effects defined
[INFO] [Registry] Dependencies: Checked 195 abilities, 107 statuses, 0 scenarios
[Registry] Validation complete: 0 errors, 6 warnings
[CharRegistry] Failed to load from /home/martin/repos/qdnd/Data/Feats/warlock_invocations.json: The JSON value could not be converted to QDND.Data.CharacterModel.FeatPrerequisite. Path: $.Feats[0].Prerequisites | LineNumber: 6 | BytePositionInLine: 47.
[CharRegistry] Loaded: 11 races, 12 classes, 41 feats, 47 equipment items
[CharRegistry] Races: 11, Classes: 12, Feats: 41, Weapons: 34, Armors: 13
[CombatContext] Registered service: CharacterDataRegistry
[CombatContext] Registered service: DataRegistry
[CombatContext] Registered service: RulesEngine
[CombatContext] Registered service: StatusManager
[CombatContext] Registered service: ConcentrationSystem
[CombatContext] Registered service: EffectPipeline
[CombatContext] Registered service: TargetValidator
[CombatContext] Registered service: ReactionSystem
[CombatContext] Registered service: LOSService
[CombatContext] Registered service: HeightService
[CombatContext] Registered service: AIDecisionPipeline
[CombatContext] Registered service: SurfaceManager
[CombatContext] Registered service: MovementService
[CombatContext] Registered service: PresentationRequestBus
[CombatContext] Registered service: CameraStateHooks
[CombatantVisual] CollisionShape3D found for Ability Tester - Drow Paladin
[CombatantVisual] Ability Tester - Drow Paladin initialized - Layer: 2, Mask: 0, Pickable: True, HasShape: True
[CombatantVisual] CollisionShape3D found for Ability Target - Dragonborn Ranger
[CombatantVisual] Ability Target - Dragonborn Ranger initialized - Layer: 2, Mask: 0, Pickable: True, HasShape: True
[AutoBattleWatchdog] Ready
[COMBAT_LOG] {"ts":1770843415498,"event":"BATTLE_START","seed":42,"units":[{"id":"ability_tester","name":"Ability Tester - Drow Paladin","faction":"Player","hp":25,"max_hp":25,"pos":[-1.5,0,0],"alive":true},{"id":"ability_target","name":"Ability Target - Dragonborn Ranger","faction":"Hostile","hp":25,"max_hp":25,"pos":[1.5,0,0],"alive":true}]}
[AutoBattleWatchdog] Monitoring STARTED (freeze: 10s, loop: 20 in 1s)
[AutoBattleRuntime] Monitoring started (seed=42, scenario=)
[COMBAT_LOG] {"ts":1770843415520,"event":"TURN_START","turn":1,"round":1,"unit":"ability_tester","unit_name":"Ability Tester - Drow Paladin","faction":"Player","hp":25,"max_hp":25,"ap":"Action | Bonus | Reaction | Move:30/30","pos":[-1.5,0,0]}
[CombatHUD] DeferredInit called - _disposed=False, IsValid=True, InTree=True
[CombatHUD] DeferredInit proceeding with setup
[CombatHUD] === NEW BG3-STYLE HUD SETUP ===
[CombatHUD] MouseFilter set to: Ignore
[CombatHUD] Turn tracker floating bar created
[CombatHUD] Hotbar panel created
[CombatHUD] Created ability button 0 with MouseFilter: Stop
[CombatHUD] Created ability button 1 with MouseFilter: Stop
[CombatHUD] Created ability button 2 with MouseFilter: Stop
[CombatHUD] Created ability button 3 with MouseFilter: Stop
[CombatHUD] Created ability button 4 with MouseFilter: Stop
[CombatHUD] Created ability button 5 with MouseFilter: Stop
[CombatHUD] Created ability button 6 with MouseFilter: Stop
[CombatHUD] Created ability button 7 with MouseFilter: Stop
[CombatHUD] Created ability button 8 with MouseFilter: Stop
[CombatHUD] Created ability button 9 with MouseFilter: Stop
[CombatHUD] Created ability button 10 with MouseFilter: Stop
[CombatHUD] Created ability button 11 with MouseFilter: Stop
[CombatHUD] End Turn button created
[CombatHUD] Combat log panel created
[CombatHUD] BG3-style character sheet panel created (360x220)
[UIAwareAI] Ready
[UIAwareAI] Subscribed to state machine
[UIAwareAI] Attached to CombatArena
[CombatHUD] END TURN Debug:
  Position: (890, 1042)
  Size: (140, 48)
  GlobalPosition: (890, 1042)
  Visible: True
  IsInsideTree: True
  Anchors: L=0.5, R=0.5, T=1, B=1
  Offsets: L=-70, R=70, T=-38, B=6
[UIAwareAI] Processing ENABLED
[UIAwareAI] HUD components verified
[UIAwareAI] HUD is ready
[AutoBattleRuntime] Connected to UIAwareAIController events (deferred)
[UIAwareAI] Turn started for Ability Tester - Drow Paladin (waited 1.07s total)
[UIAwareAI] Ability Tester - Drow Paladin -> Disengage (#1) score:4.21
[UIAwareAI] State: PlayerDecision -> ActionExecution
[UIAwareAI] State: ActionExecution -> PlayerDecision
[UIAwareAI] Ability Tester - Drow Paladin -> EndTurn (#2) score:2.61
[UIAwareAI] Calling EndCurrentTurn()
[UIAwareAI] State: PlayerDecision -> TurnEnd
[COMBAT_LOG] {"ts":1770843423163,"event":"TURN_START","turn":2,"round":1,"unit":"ability_target","unit_name":"Ability Target - Dragonborn Ranger","faction":"Hostile","hp":25,"max_hp":25,"ap":"Action | Bonus | Reaction | Move:30/30","pos":[1.5,0,0]}
[UIAwareAI] State: TurnEnd -> TurnStart
[UIAwareAI] State: TurnStart -> AIDecision
[UIAwareAI] Turn started for Ability Target - Dragonborn Ranger (waited 1.61s total)
[UIAwareAI] Ability Target - Dragonborn Ranger -> Move (#1) score:12.26
[UIAwareAI] State: AIDecision -> ActionExecution
[UIAwareAI] State: ActionExecution -> AIDecision
[UIAwareAI] Ability Target - Dragonborn Ranger -> Disengage (#2) score:0.61
[UIAwareAI] State: AIDecision -> ActionExecution
[UIAwareAI] State: ActionExecution -> AIDecision
[COMBAT_LOG] {"ts":1770843425604,"event":"ERROR","description":"MAX_RUNTIME_EXCEEDED","error":"Maximum runtime exceeded (10.11s \u003E= 10.00s)."}
[AutoBattleWatchdog] Monitoring STOPPED
[COMBAT_LOG] {"ts":1770843425606,"event":"BATTLE_END","winner":"Draw (timeout)","total_turns":2,"total_rounds":1,"duration_ms":10111}

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘             AUTO-BATTLE RESULTS                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Winner:       Draw (timeout)
  Total Turns:  2
  Total Rounds: 1
  Duration:     10111ms
  Completed:    False
  End Reason:   max_time_exceeded
  Seed:         42

  Surviving Units:
    - Ability Tester - Drow Paladin (ability_tester) HP:25/25
    - Ability Target - Dragonborn Ranger (ability_target) HP:25/25

AUTO-BATTLE: FAILED (max_time_exceeded)
[0;36mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;31m[ERROR][0m Auto-battle FAILED (exit code: 1)
